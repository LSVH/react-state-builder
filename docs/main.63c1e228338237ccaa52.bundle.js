(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{359:function(module,__webpack_exports__,__webpack_require__){"use strict";var react=__webpack_require__(0),__assign=function(){return(__assign=Object.assign||function(t){for(var s,i=1,n=arguments.length;i<n;i++)for(var p in s=arguments[i])Object.prototype.hasOwnProperty.call(s,p)&&(t[p]=s[p]);return t}).apply(this,arguments)},__spreadArrays=function(){for(var s=0,i=0,il=arguments.length;i<il;i++)s+=arguments[i].length;var r=Array(s),k=0;for(i=0;i<il;i++)for(var a=arguments[i],j=0,jl=a.length;j<jl;j++,k++)r[k]=a[j];return r};function isPayloadAlreadyLoaded(payload,sub){switch(null!=sub.identifier?sub.identifier.constructor.name:null){case"Array":return!function isPayloadFoundInSubItemsByArrayIdentifier(payload,sub){var ids=null!=sub.identifier&&Array.isArray(sub.identifier)?sub.identifier:[];return null!=sub.items.find((function(i){return ids.filter((function(id){return i.hasOwnProperty(id)&&payload.hasOwnProperty(id)&&i[id]===payload[id]})).length===ids.length}))}(payload,sub);case"String":return!function isPayloadFoundInSubItemsByStringIdentifier(payload,sub){var id=null==sub.identifier||Array.isArray(sub.identifier)?"":sub.identifier;return null!=sub.items.find((function(i){return i.hasOwnProperty(id)&&i[id]===payload}))}(payload,sub);default:return!function isPayloadEqualToASubItem(payload,sub){return null!=sub.items.find((function(i){return JSON.stringify(i)===JSON.stringify(payload)}))}(payload,sub)}}try{reducer.displayName="reducer",reducer.__docgenInfo={description:"",displayName:"reducer",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/reducer.tsx#reducer"]={docgenInfo:reducer.__docgenInfo,name:"reducer",path:"src/reducer.tsx#reducer"})}catch(__react_docgen_typescript_loader_error){}__webpack_exports__.a=function(onInit,onLoad){return function(reducer,onInit){var defaultState=onInit(),Context=react.createContext({state:defaultState,dispatch:function(){return defaultState}});return[Context,function Provider(props){var _a=react.useReducer(reducer,defaultState),state=_a[0],dispatch=_a[1];return react.createElement(Context.Provider,__assign({value:{state:state,dispatch:dispatch}},props))}]}(function(onLoad){return function(state,_a){var type=_a.type,payload=_a.payload;return null!=state&&state.hasOwnProperty(type)&&isPayloadAlreadyLoaded(payload,state[type])&&(state[type].items=__spreadArrays(state[type].items,[onLoad(type,payload)])),state}}(onLoad),onInit)}},360:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__(2),__webpack_require__(8),__webpack_require__(5),__webpack_require__(3),__webpack_require__(0);var index_es=__webpack_require__(14),blocks=__webpack_require__(93),createStateBuilder=function(_a){return null},onLoad=function(_a){return null};try{createStateBuilder.displayName="createStateBuilder",createStateBuilder.__docgenInfo={description:"",displayName:"createStateBuilder",props:{onInit:{defaultValue:null,description:"The function what initiates the state to build upon.",name:"onInit",required:!0,type:{name:"() => any[]"}},onLoad:{defaultValue:null,description:"This function is called every time new parts of the state are loaded.",name:"onLoad",required:!0,type:{name:"(type: string, payload?: any) => any"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["books/index.props.tsx#createStateBuilder"]={docgenInfo:createStateBuilder.__docgenInfo,name:"createStateBuilder",path:"books/index.props.tsx#createStateBuilder"})}catch(__react_docgen_typescript_loader_error){}try{onLoad.displayName="onLoad",onLoad.__docgenInfo={description:"",displayName:"onLoad",props:{type:{defaultValue:null,description:"The type passed from a dispatch call, used to determine under which key the loaded data should be stored. Useful\nto query the data what should be loaded.",name:"type",required:!0,type:{name:"string"}},payload:{defaultValue:null,description:"The payload passed from a dispatch call, usually used to query the data which should be loaded.",name:"payload",required:!1,type:{name:"any"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["books/index.props.tsx#onLoad"]={docgenInfo:onLoad.__docgenInfo,name:"onLoad",path:"books/index.props.tsx#onLoad"})}catch(__react_docgen_typescript_loader_error){}function _extends(){return(_extends=Object.assign||function(target){for(var source,i=1;i<arguments.length;i++)for(var key in source=arguments[i])Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key]);return target}).apply(this,arguments)}function _objectWithoutProperties(source,excluded){if(null==source)return{};var key,i,target=function _objectWithoutPropertiesLoose(source,excluded){if(null==source)return{};var key,i,target={},sourceKeys=Object.keys(source);for(i=0;i<sourceKeys.length;i++)key=sourceKeys[i],0<=excluded.indexOf(key)||(target[key]=source[key]);return target}(source,excluded);if(Object.getOwnPropertySymbols){var sourceSymbolKeys=Object.getOwnPropertySymbols(source);for(i=0;i<sourceSymbolKeys.length;i++)key=sourceSymbolKeys[i],!(0<=excluded.indexOf(key))&&Object.prototype.propertyIsEnumerable.call(source,key)&&(target[key]=source[key])}return target}__webpack_require__.d(__webpack_exports__,"a",(function(){return MDXContent}));var layoutProps={},MDXLayout="wrapper",_ref2=Object(index_es.mdx)("h1",null,"createStateBuilder(onInit, onLoad)"),_ref3=Object(index_es.mdx)("p",null,"Returns the ",Object(index_es.mdx)("inlineCode",{parentName:"p"},"context")," and the ",Object(index_es.mdx)("inlineCode",{parentName:"p"},"Provider")," component what will help you building your application state."),_ref4=Object(index_es.mdx)(blocks.Props,{of:createStateBuilder,mdxType:"Props"}),_ref5=Object(index_es.mdx)("h2",null,"Argument: onInit"),_ref6=Object(index_es.mdx)("p",null,"Returns a so called ",Object(index_es.mdx)("inlineCode",{parentName:"p"},"StateType")," what has the following type declaration:"),_ref7=Object(index_es.mdx)("h2",null,"Argument: onLoad"),_ref8=Object(index_es.mdx)("p",null,"May return anything except a ",Object(index_es.mdx)("inlineCode",{parentName:"p"},"void"),", because the returned value will be pushed into the corresponding items collection."),_ref9=Object(index_es.mdx)(blocks.Props,{of:onLoad,mdxType:"Props"}),_ref10=Object(index_es.mdx)("h2",null,"Example"),_ref11=Object(index_es.mdx)("h3",null,"Result"),_ref12=Object(index_es.mdx)(blocks.Preview,{mdxType:"Preview"},Object(index_es.mdx)(blocks.Story,{id:"createstatebuilder--load-without-identifier",mdxType:"Story"}));function MDXContent(_ref){var components=_ref.components,props=_objectWithoutProperties(_ref,["components"]);return Object(index_es.mdx)(MDXLayout,_extends({},layoutProps,props,{components:components,mdxType:"MDXLayout"}),_ref2,_ref3,_ref4,_ref5,_ref6,Object(index_es.mdx)("pre",null,Object(index_es.mdx)("code",_extends({parentName:"pre"},{}),"type StateType = null | {\n  [index: string]: {\n    items: Array<any>,\n    loading?: boolean,\n    identifier?: string | Array<string>,\n  }\n}\n")),_ref7,_ref8,_ref9,_ref10,Object(index_es.mdx)("pre",null,Object(index_es.mdx)("code",_extends({parentName:"pre"},{className:"language-jsx"}),"import createStateBuilder from 'react-state-builder';\n\nconst [context, Provider] = createStateBuilder(onInit, onLoad);\n\nfunction onInit() {\n  return {\n    a: {\n      items: [Math.random()]\n    },\n    b: {\n      identifier: 'id',\n      items: [{'id': Math.random()}]\n    },\n    c: {\n      identifier: ['id', 'lang'],\n      items: [{'id': Math.random(), 'lang': 'en'}]\n    },\n  }\n}\n\nfunction onLoad(type: string, payload?: any) {\n  return payload;\n}\n\nfunction CurrentState({type}: React.PropsWithChildren<{ type?: string }>) {\n  const {state} = React.useContext(context);\n  const value = type != null && state != null && state.hasOwnProperty(type)\n    ? state[type] : state;\n  type = type != null ? '.' + type : '';\n  return <p>Current state{type}: {JSON.stringify(value)}</p>;\n}\n\nfunction Button({type, payload}: React.PropsWithChildren<{ type: string, payload: any }>) {\n  const {dispatch} = React.useContext(context);\n  const onClick = () => dispatch({type, payload});\n  return <button onClick={onClick}>Load into SubState: {type}</button>\n}\n\nexport default () => (\n  <Provider>\n    <CurrentState type='a'/>\n    <Button type='a' payload={'Hello World'}/>\n  </Provider>\n);\n")),_ref11,_ref12)}MDXContent.displayName="MDXContent",MDXContent.isMDXComponent=!0,MDXContent.__docgenInfo={description:"",methods:[],displayName:"MDXContent"},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["books/index.mdx"]={name:"MDXContent",docgenInfo:MDXContent.__docgenInfo,path:"books/index.mdx"})},361:function(module,exports,__webpack_require__){__webpack_require__(362),__webpack_require__(475),__webpack_require__(476),module.exports=__webpack_require__(780)},383:function(module,exports){},780:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),function(module){var _storybook_react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(120),req=__webpack_require__(781);Object(_storybook_react__WEBPACK_IMPORTED_MODULE_0__.configure)(req,module)}.call(this,__webpack_require__(351)(module))},781:function(module,exports,__webpack_require__){var map={"./index.story.tsx":782};function webpackContext(req){var id=webpackContextResolve(req);return __webpack_require__(id)}function webpackContextResolve(req){if(!__webpack_require__.o(map,req)){var e=new Error("Cannot find module '"+req+"'");throw e.code="MODULE_NOT_FOUND",e}return map[req]}webpackContext.keys=function webpackContextKeys(){return Object.keys(map)},webpackContext.resolve=webpackContextResolve,module.exports=webpackContext,webpackContext.id=781},782:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),function(module){var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(0),_storybook_react__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(120),_storybook_addon_knobs__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(95),_src__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(359),_index_mdx__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(360),_a=Object(_src__WEBPACK_IMPORTED_MODULE_3__.a)(onInit,(function onLoad(type,payload){return console.log("adding data into sub-state: "+type),payload})),context=_a[0],Provider=_a[1];function onInit(){return{a:{items:[Math.random()]},b:{identifier:"id",items:[{id:Math.random()}]},c:{identifier:["id","lang"],items:[{id:Math.random(),lang:"en"}]}}}function InitialState(){return react__WEBPACK_IMPORTED_MODULE_0__.createElement("p",null,"Initial state: "+JSON.stringify(onInit()))}function CurrentState(_a){var type=_a.type;console.log("render @child"),react__WEBPACK_IMPORTED_MODULE_0__.useEffect((function(){console.log("useEffect @child")}));var state=react__WEBPACK_IMPORTED_MODULE_0__.useContext(context).state,value=null!=type&&null!=state&&state.hasOwnProperty(type)?state[type]:state;return react__WEBPACK_IMPORTED_MODULE_0__.createElement("p",null,"Current state"+(null!=type?"."+type:"")+": "+JSON.stringify(value))}function Button(_a){var type=_a.type,payload=_a.payload,dispatch=react__WEBPACK_IMPORTED_MODULE_0__.useContext(context).dispatch;return react__WEBPACK_IMPORTED_MODULE_0__.createElement("button",{onClick:function(){return dispatch({type:type,payload:payload})}},"Load into SubState: "+type)}Object(_storybook_react__WEBPACK_IMPORTED_MODULE_1__.storiesOf)("createStateBuilder()",module).addDecorator(_storybook_addon_knobs__WEBPACK_IMPORTED_MODULE_2__.withKnobs).addParameters({docs:{page:_index_mdx__WEBPACK_IMPORTED_MODULE_4__.a}}).add("onInit and onLoad",(function(){return react__WEBPACK_IMPORTED_MODULE_0__.createElement(Provider,null,react__WEBPACK_IMPORTED_MODULE_0__.createElement(InitialState,null),react__WEBPACK_IMPORTED_MODULE_0__.createElement(CurrentState,{type:"a"}),react__WEBPACK_IMPORTED_MODULE_0__.createElement(CurrentState,{type:"b"}),react__WEBPACK_IMPORTED_MODULE_0__.createElement(CurrentState,{type:"c"}))})).add("load without identifier",(function(){return console.log("render @app"),react__WEBPACK_IMPORTED_MODULE_0__.createElement(Provider,null,react__WEBPACK_IMPORTED_MODULE_0__.createElement(CurrentState,{type:"a"}),react__WEBPACK_IMPORTED_MODULE_0__.createElement(Button,{type:"a",payload:Object(_storybook_addon_knobs__WEBPACK_IMPORTED_MODULE_2__.text)("payload","Hello World")}))})).add("load with string identifier",(function(){return react__WEBPACK_IMPORTED_MODULE_0__.createElement(Provider,null,react__WEBPACK_IMPORTED_MODULE_0__.createElement(CurrentState,{type:"b"}),react__WEBPACK_IMPORTED_MODULE_0__.createElement(Button,{type:"b",payload:{id:Object(_storybook_addon_knobs__WEBPACK_IMPORTED_MODULE_2__.text)("payload.id","Hello World")}}))})).add("load with array identifier",(function(){return react__WEBPACK_IMPORTED_MODULE_0__.createElement(Provider,null,react__WEBPACK_IMPORTED_MODULE_0__.createElement(CurrentState,{type:"c"}),react__WEBPACK_IMPORTED_MODULE_0__.createElement(Button,{type:"c",payload:{id:Object(_storybook_addon_knobs__WEBPACK_IMPORTED_MODULE_2__.text)("payload.id","Hello"),lang:Object(_storybook_addon_knobs__WEBPACK_IMPORTED_MODULE_2__.text)("payload.lang","World")}}))}))}.call(this,__webpack_require__(351)(module))}},[[361,1,2]]]);
//# sourceMappingURL=main.63c1e228338237ccaa52.bundle.js.map